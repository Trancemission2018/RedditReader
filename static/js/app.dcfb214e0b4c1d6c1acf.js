webpackJsonp([1],{128:function(t,e,s){"use strict";var a=s(39),o=s.n(a),n=s(11),r=n.create({baseURL:"https://old.reddit.com"});e.a={getRedditTopPosts:function(t){return new o.a(function(e,s){console.log("Please go and get top some posts for",t);try{r.get("/r/"+t+"/.json").then(function(t){console.log("Ok we have posts",t),e(t.data)}).catch(function(t){console.log("Oh pants we have an error"),s(t)})}catch(t){console.log("Shit, axios setup failed check url"),s(t)}})},getRedditNewPosts:function(t,e){return new o.a(function(s,a){console.log("Please go and get new some posts for",t);try{var o="";e&&(o="?after="+e),r.get("/r/"+t+"/new/.json"+o).then(function(t){console.log("Ok we have posts",t),s(t.data)}).catch(function(t){console.log("Oh pants we have an error"),a(t)})}catch(t){console.log("Shit, axios setup failed check url"),a(t)}})}}},129:function(t,e,s){"use strict";e.a={SET_REDDIT_VIEW:function(t,e){t.reddit.currentType=e},SET_REDDIT_POSTS:function(t,e){t.reddit.currentPosts=e},SET_TITLE:function(t,e){t.title=e}}},130:function(t,e,s){"use strict";e.a={}},132:function(t,e){},29:function(t,e,s){"use strict";e.a={data:function(){return{postType:"new",clipped:!1,drawer:!1,fixed:!1,items:[{icon:"bubble_chart",title:"Inspire"}],miniVariant:!1,right:!0,rightDrawer:!1,title:"Vuetify.js"}},name:"App",watch:{},methods:{}}},30:function(t,e,s){"use strict";e.a={name:"",components:{},props:[],data:function(){return{}},created:function(){},methods:{}}},31:function(t,e,s){"use strict";var a=s(11),o=s.n(a),n=s(83);e.a={name:"reddit",components:{PostRow:n.a},props:["subreddit"],data:function(){return{loading:!0,posts:[],firstId:null,lastId:null,history:{urls:[]}}},mounted:function(){console.log(this.$store.state.route.params.start),console.log("Ok load posts for ",this.$store.state.route.params.subReddit),console.log("Ok start at ",this.$store.state.route.params.start),this.loadPosts("start")},watch:{"$store.state.reddit.currentType":function(){console.log("Reload post pls",this.$store.state.reddit.currentType),this.loadPosts("start")},"$store.state.route.params":function(){this.loadPosts("start")}},methods:{loadPosts:function(t){var e=this,s=this.$store.state.route.params.subReddit;switch(this.$store.state.title=s,t){case"start":var a="";switch(this.$store.state.reddit.currentType){case"new":a="https://old.reddit.com/r/"+s+"/new/.json",o.a.get(a).then(function(t){e.posts=t.data.data.children;var s=e.posts.length-1;e.lastId=e.posts[s].data.name,e.firstId=e.posts[0].data.name,e.loading=!1});break;default:a="https://old.reddit.com/r/"+s+"/.json",o.a.get(a).then(function(t){e.posts=t.data.data.children;var s=e.posts.length-1;e.lastId=e.posts[s].data.name,e.firstId=e.posts[0].data.name,e.loading=!1})}break;case"after":switch(this.$store.state.reddit.currentType){case"new":a="https://old.reddit.com/r/"+s+"/new/.json?after="+this.lastId,o.a.get(a).then(function(t){e.posts=t.data.data.children;var s=e.posts.length-1;e.lastId=e.posts[s].data.name,e.firstId=e.posts[0].data.name,e.loading=!1,e.scrollTop()});break;default:a="https://old.reddit.com/r/"+s+"/.json?after="+this.lastId,o.a.get(a).then(function(t){e.posts=t.data.data.children;var s=e.posts.length-1;e.lastId=e.posts[s].data.name,e.firstId=e.posts[0].data.name,e.loading=!1,e.scrollTop()})}break;case"before":switch(this.$store.state.reddit.currentType){case"new":a="https://old.reddit.com/r/"+s+"/new/.json?before="+this.firstId,o.a.get(a).then(function(t){e.posts=t.data.data.children;var s=e.posts.length-1;e.lastId=e.posts[s].data.name,e.firstId=e.posts[0].data.name,e.loading=!1,e.scrollTop()});break;default:a="https://old.reddit.com/r/"+s+"/.json?before="+this.firstId,o.a.get(a).then(function(t){e.posts=t.data.data.children;var s=e.posts.length-1;e.lastId=e.posts[s].data.name,e.firstId=e.posts[0].data.name,e.loading=!1,e.scrollTop()})}}},next:function(){console.log("Last ID is ",this.$store.state.reddit.lastId),this.loadPosts("after")},previous:function(){console.log("First ID is ",this.$store.state.reddit.firstId),this.loadPosts("before")},loadPost:function(t){console.log("We are going from ",this.$route);var e=this.$store.state.route.params.subReddit;this.$router.push("/reddit/post/"+e+"/"+t.data.id)},scrollTop:function(){window.scroll({top:0,left:0,behavior:"smooth"})}}}},37:function(t,e,s){"use strict";e.a={name:"post-row",props:{post:{}},methods:{loadPost:function(t){console.log("Loading post"),this.$emit("loadPost",t)}}}},38:function(t,e,s){"use strict";var a=s(11),o=s.n(a);e.a={name:"reddit-post",components:{},props:[],data:function(){return{post:{},comments:[],rootComments:[],depth:0,currentAuthor:null,url:"",isImage:!1,imageUrl:""}},mounted:function(){var t=this;o.a.get("https://old.reddit.com/r/"+this.$route.params.subReddit+"/"+this.$route.params.postId+"/.json").then(function(e){t.post=e.data[0].data.children[0].data,t.currentAuthor=t.post.author,""!==t.post.url&&console.log("URL ",t.parseUrl(t.post.url)),t.post.content=t.post.selftext.replace(/(?:\r\n|\r|\n)/g,"<br>"),t.comments=t.getCommentsFromArray(e.data[1].data.children),console.log("Here you go - some comments",t.comments)})},methods:{getCommentsFromArray:function(t){var e=this;console.log("Get comments from arr",t);var s="";return t.forEach(function(t){if(void 0!==t)if(0===t.data.depth?s+='<div class="pa-1 grey lighten-3 mb-3">':s+='<div class="pa-1 white">',console.log("In Loop",t),s+='\n                  <div class="">\n          ',e.currentAuthor===t.data.author?s+='<b><span class="teal pa-1">'+e.currentAuthor+"</span></b>":s+="<b>"+t.data.author+"</b>",s+="\n                  "+t.data.ups+"</div>\n                  "+e.decodeHTMLEntities(t.data.body_html)+"\n                  </div>",void 0!==t.data.replies&&""!==t.data.replies){e.depth++;var a=10*e.depth;s+='<div style="padding-left: '+a+'px"> '+e.getCommentsFromArray(t.data.replies.data.children)+"</div>"}else e.depth=0}),s},decodeHTMLEntities:function(t){if(t){var e={amp:"&",apos:"'",lt:"<",gt:">",quot:'"',nbsp:"Â "},s=/&([a-z]+);/gi;return t.replace(s,function(t,s){return s=s.toLowerCase(),e.hasOwnProperty(s)?e[s]:t})}return""},parseUrl:function(t){var e=new RegExp("^https?://(.*)/(.*)$","i"),s=t.match(e),a=t.split(".").pop();switch(console.log("Ext",a),this.imageUrl="",a){case"png":case"jpg":case"jpeg":this.isImage=!0,this.imageUrl=t}this.isImage||(this.url=s[1],this.url.match(/imgur/)?(this.getImageFromImgur(t),this.isImage=!0):this.url="")},getImageFromImgur:function(t){var e=this;o.a.get("http://localhost:9000/imgur/image?url="+t).then(function(t){e.imageUrl=t.data.url})}}}},53:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(10),o=s(56),n=s(58),r=s(89),i=s(131),d=s.n(i),l=s(132),c=(s.n(l),s(11)),u=s.n(c),p=s(133),h=s.n(p),m=s(134);s.n(m);a.default.use(h.a,u.a),Object(m.sync)(r.a,n.a),a.default.use(d.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:n.a,store:r.a,components:{App:o.a},template:"<App/>"})},56:function(t,e,s){"use strict";var a=s(29),o=s(57),n=s(6),r=n(a.a,o.a,!1,null,null,null);e.a=r.exports},57:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-navigation-drawer",{attrs:{persistent:"","mini-variant":t.miniVariant,clipped:t.clipped,"enable-resize-watcher":"",fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("div",{staticClass:"pa-2"}),t._v(" "),s("v-list",t._l(t.$store.state.reddit.subs,function(e,a){return s("v-list-tile",{key:a,attrs:{value:"true",to:e.path},on:{click:function(e){t.drawer=!1}}},[s("v-list-tile-action"),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{textContent:t._s(e.name)}})],1)],1)}))],1),t._v(" "),s("v-toolbar",{attrs:{app:"","clipped-left":t.clipped}},[s("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),s("v-icon",{on:{click:function(e){t.$router.go(-1)}}},[t._v("chevron_left")]),t._v("\n        "+t._s(t.$store.state.title)+"\n        "),s("v-spacer"),t._v(" "),s("v-layout",[s("v-flex",{attrs:{xs8:""}}),t._v(" "),s("v-flex",{staticClass:"text-xs-right pt-3",attrs:{xs4:""}},[s("v-select",{attrs:{items:t.$store.state.reddit.types},model:{value:t.$store.state.reddit.currentType,callback:function(e){t.$set(t.$store.state.reddit,"currentType",e)},expression:"$store.state.reddit.currentType"}})],1)],1)],1),t._v(" "),s("v-content",{attrs:{id:"mainContent"}},[s("router-view")],1),t._v(" "),s("v-footer",{attrs:{fixed:t.fixed,app:""}},[s("span",[t._v("Cockwomble")])])],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},58:function(t,e,s){"use strict";var a=s(10),o=s(59),n=s(60),r=s(64),i=s(86);a.default.use(o.a),e.a=new o.a({routes:[{path:"/",name:"Start",component:n.a},{path:"/reddit/post/:subReddit/:postId",name:"Reddit Post",component:i.a},{path:"/reddit/:subReddit",name:"Reddit Posts",component:r.a},{path:"/reddit/:subReddit/:start/:postId",name:"Reddit Posts",component:r.a}]})},60:function(t,e,s){"use strict";function a(t){s(61)}var o=s(30),n=s(63),r=s(6),i=a,d=r(o.a,n.a,!1,i,"data-v-72d97b20",null);e.a=d.exports},61:function(t,e){},63:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:""}},[s("v-layout",[s("v-flex",{attrs:{xs4:"",md6:""}},[t._v("\n            Ando so it begin\n        ")]),t._v(" "),s("v-flex",{attrs:{xs4:"",md6:""}},[t._v("\n            Again....\n        ")])],1)],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},64:function(t,e,s){"use strict";var a=s(31),o=s(85),n=s(6),r=n(a.a,o.a,!1,null,null,null);e.a=r.exports},83:function(t,e,s){"use strict";var a=s(37),o=s(84),n=s(6),r=n(a.a,o.a,!1,null,null,null);e.a=r.exports},84:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-list-tile",{attrs:{avatar:""},on:{click:function(e){t.loadPost(t.post)}}},[s("v-list-tile-avatar",[t._v("\n            "+t._s(t.post.data.score)+"\n        ")]),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(t.post.data.title)+" -\n                "),s("small",[t._v(t._s(t.post.data.domain))])]),t._v(" "),s("v-list-tile-sub-title",[t._v(t._s(t.post.data.num_comments)+" Comments")])],1)],1)],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},85:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-layout",{staticClass:"pa-2"},[t.loading?s("div",[t._v("Loading.........")]):t._e(),t._v(" "),t.loading?t._e():s("v-card",{attrs:{flat:""}},[s("v-list",{attrs:{"two-line":""}},t._l(t.posts,function(e,a){return s("post-row",{key:a,attrs:{post:e},on:{loadPost:t.loadPost}})}))],1)],1),t._v(" "),s("v-layout",[s("v-flex",{staticClass:"px-2",attrs:{xs6:""}},[s("v-btn",{attrs:{small:"",color:"grey"},on:{click:t.previous}},[t._v("Prev\n            ")])],1),t._v(" "),s("v-flex",{staticClass:"text-xs-right px-2",attrs:{xs6:""}},[s("v-btn",{attrs:{small:"",color:"grey"},on:{click:t.next}},[t._v("Next\n            ")])],1)],1)],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},86:function(t,e,s){"use strict";function a(t){s(87)}var o=s(38),n=s(88),r=s(6),i=a,d=r(o.a,n.a,!1,i,"data-v-739d24e9",null);e.a=d.exports},87:function(t,e){},88:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("div",{staticClass:"postTitle mb-2"},[s("strong",[t._v(t._s(t.post.title))]),t._v("\n        - "),s("span",{staticClass:"teal pa-1"},[t._v(t._s(t.post.author))])]),t._v(" "),t.isImage?s("img",{attrs:{src:t.imageUrl,width:"500"}}):t._e(),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"pa-2 mb-2"},[t._v("\n        "+t._s(t.post.url)+"\n        "),s("a",{attrs:{href:t.post.url,target:"_blank"}},[s("v-icon",{attrs:{small:""}},[t._v("link")])],1)]),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.comments)}})])},o=[],n={render:a,staticRenderFns:o};e.a=n},89:function(t,e,s){"use strict";var a=s(10),o=s(90),n=s(91),r=s(92),i=s(129),d=s(130);a.default.use(o.a),e.a=new o.a.Store({state:n.a,actions:r.a,mutations:i.a,getters:d.a})},91:function(t,e,s){"use strict";e.a={title:"MyHome",reddit:{currentSub:null,currentType:"new",types:[{value:"new",text:"New"},{value:"hot",text:"Hot"}],currentPosts:[],firstId:null,lastId:0,subs:[{name:"CasualUk",path:"/reddit/CasualUk"},{name:"BritishSuccess",path:"/reddit/BritishSuccess"},{name:"BritishProblems",path:"/reddit/BritishProblems"},{name:"Vue",path:"/reddit/VueJs"},{name:"Javascript",path:"/reddit/Javascript"},{name:"WebDev",path:"/reddit/webdev"}]}}},92:function(t,e,s){"use strict";var a=s(39),o=s.n(a),n=s(128);e.a={loadTopPosts:function(t,e){var s=this;n.a.getRedditTopPosts(e).then(function(t){s.commit("SET_TITLE",e),s.commit("SET_REDDIT_POSTS",t.data.children)}).catch(function(t){console.log("We should have and error",t)})},loadNewPosts:function(t,e){var s=this,a=(t.commit,t.state);return a.reddit.lastId&&console.log("Loading new posts, do we have a last!",a),new o.a(function(t,o){n.a.getRedditNewPosts(e,a.reddit.lastId).then(function(a){s.commit("SET_TITLE",e),s.commit("SET_REDDIT_POSTS",a.data.children),t()}).catch(function(t){o(),console.log("We should have and error",t)})})},setRedditView:function(t,e){this.commit("SET_REDDIT_VIEW",e)}}}},[53]);
//# sourceMappingURL=app.dcfb214e0b4c1d6c1acf.js.map