webpackJsonp([1],{106:function(t,e,s){"use strict";var a=s(48),r=s(107),o=s(4),n=o(a.a,r.a,!1,null,null,null);e.a=n.exports},107:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-list-tile",{attrs:{avatar:""},on:{click:t.loadPost}},[s("v-list-tile-avatar",[t._v("\n            "+t._s(t.post.data.score)+"\n        ")]),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(t.post.data.title)+" -\n                "),s("small",[t._v(t._s(t.post.data.domain))])]),t._v(" "),s("v-list-tile-sub-title",[t._v(t._s(t.post.data.num_comments)+" Comments")])],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},108:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-layout",{staticClass:"a-2",attrs:{fluid:""}},[s("v-flex",{attrs:{xs12:""}},[t.loading?s("div",{staticClass:"text-xs-center pt-4"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._e()])],1),t._v(" "),s("v-layout",{staticClass:"a-2",attrs:{fluid:""}},[t.loading?t._e():s("v-card",{attrs:{flat:""}},[s("v-list",{attrs:{"two-line":""}},t._l(t.$store.state.reddit.currentPosts,function(e,a){return s("post-row",{key:a,attrs:{post:e},on:{loadPost:function(s){t.loadPost(e.data.id)}}})}))],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},109:function(t,e,s){"use strict";var a=s(11),r=s(110),o=s(111),n=s(112),i=s(141),l=s(142);a.default.use(r.a),e.a=new r.a.Store({state:o.a,actions:n.a,mutations:i.a,getters:l.a})},111:function(t,e,s){"use strict";e.a={title:"MyHome",lastScroll:0,reddit:{currentSub:null,currentType:"new",types:[{value:"new",text:"New"},{value:"hot",text:"Hot"}],currentPosts:[],currentAfter:null,history:[],pages:[],firstId:null,lastId:null,subs:[{name:"CasualUk",path:"/reddit/sub/CasualUk"},{name:"BritishSuccess",path:"/reddit/sub/BritishSuccess"},{name:"BritishProblems",path:"/reddit/sub/BritishProblems"},{name:"Vue",path:"/reddit/sub/VueJs"},{name:"Javascript",path:"/reddit/sub/Javascript"},{name:"WebDev",path:"/reddit/sub/webdev"}]}}},112:function(t,e,s){"use strict";var a=s(49),r=s.n(a),o=s(140);e.a={loadPosts:function(t,e){var s=this,a=(t.commit,t.state);return new r.a(function(t,r){var n=a.route.params.subReddit,i=a.reddit.currentType;a.title=n,o.a.getPosts(n,i,e).then(function(e){var a=e.children.length-1;s.commit("SET_REDDIT_POSTS",e.children),s.commit("SET_FIRST_ID",e.children[0].data.name),s.commit("SET_LAST_ID",e.children[a].data.name),s.commit("SET_CURRENT_AFTER",e.children[a].data.name),s.commit("ADD_PAGE",e.children[0].data.name),t()}).catch(function(t){return r(t)})})}}},140:function(t,e,s){"use strict";var a=s(49),r=s.n(a),o=s(12),n=o.create({baseURL:"https://old.reddit.com"});e.a={getPosts:function(t,e,s){var a="/r/"+t+"/"+e+"/.json";return s&&(a+="?after="+s),new r.a(function(t,e){n.get(a).then(function(e){console.log("We have some posts from ",e),t(e.data.data)}).catch(function(t){return e(t)})})}}},141:function(t,e,s){"use strict";e.a={SET_REDDIT_VIEW:function(t,e){t.reddit.currentType=e},SET_REDDIT_POSTS:function(t,e){t.reddit.currentPosts=e},SET_FIRST_ID:function(t,e){console.log("Setting ID",e),t.reddit.firstId=e},SET_LAST_ID:function(t,e){t.reddit.lastId=e},SET_CURRENT_AFTER:function(t,e){t.reddit.currentAfter=e},ADD_PAGE:function(t,e){t.reddit.pages.push(e)},SET_TITLE:function(t,e){t.title=e}}},142:function(t,e,s){"use strict";e.a={}},144:function(t,e){},30:function(t,e,s){"use strict";e.a={data:function(){return{postType:"new",clipped:!1,drawer:!1,fixed:!1,items:[{icon:"bubble_chart",title:"Inspire"}],miniVariant:!1,right:!0,rightDrawer:!1}},name:"App",mounted:function(){},watch:{},methods:{loadNext:function(){var t="/reddit/sub/"+this.$store.state.route.params.subReddit+"?after="+this.$store.state.reddit.currentAfter;this.$store.state.lastScroll=0,this.$router.push(t)},loadPrevious:function(){this.$router.go(-1)}}}},31:function(t,e,s){"use strict";e.a={name:"",components:{},props:[],data:function(){return{}},created:function(){},methods:{}}},32:function(t,e,s){"use strict";var a=s(12),r=s.n(a),o=s(87);e.a={name:"reddit",components:{PostRow:o.a},props:["subreddit"],data:function(){return{loading:!0,posts:[],firstId:null,lastId:null,history:{urls:[]}}},mounted:function(){this.loadPosts()},watch:{"$store.state.reddit.currentType":function(){},$route:function(t,e){var s=this,a=this.$store.state.route.params.subReddit;switch(this.$store.state.reddit.currentType){case"new":var o="https://old.reddit.com/r/"+a+"/new/.json?after="+t.query.after;r.a.get(o).then(function(t){s.posts=t.data.data.children,window.scroll({top:s.$store.state.lastScroll,left:0,behavior:"smooth"})})}}},route:{canReuse:!0},methods:{loadPosts:function(){var t=this,e=this.$store.state.route.params.subReddit;this.$store.state.title=e;var s="";this.$store.state.route.query&&this.$store.state.route.query.after&&(s="?after="+this.$store.state.route.query.after),console.log("We are loading!");var a="";switch(this.$store.state.reddit.currentType){case"new":a="https://old.reddit.com/r/"+e+"/new/.json"+s;break;default:a="https://old.reddit.com/r/"+e+"/.json"+s}r.a.get(a).then(function(e){t.posts=e.data.data.children,t.loading=!1}),window.scroll({top:this.$store.state.lastScroll,left:0,behavior:"smooth"})},next:function(){var t=this.posts.length-1;this.lastId=this.posts[t].data.name,this.$store.state.reddit.pages.push(this.lastId),this.$router.push({path:this.$store.state.route.params.subReddit,query:{after:this.lastId}})},previous:function(){this.loadPosts("before")},loadPost:function(t){this.$store.state.lastScroll=window.scrollY;var e=this.$store.state.route.params.subReddit;this.$router.push("/reddit/post/"+e+"/"+t.data.id)},scrollTop:function(){window.scroll({top:0,left:0,behavior:"smooth"})}}}},38:function(t,e,s){"use strict";e.a={name:"post-row",props:{post:{}},methods:{loadPost:function(t){console.log("Loading post"),this.$emit("loadPost",t)}}}},39:function(t,e,s){"use strict";var a=s(12),r=s.n(a);e.a={name:"reddit-post",components:{},props:[],data:function(){return{post:{},comments:[],rootComments:[],depth:0,currentAuthor:null,url:"",isImage:!1,imageUrl:""}},mounted:function(){var t=this;console.log("And here are are"),r.a.get("https://old.reddit.com/r/"+this.$route.params.subReddit+"/"+this.$route.params.postId+"/.json").then(function(e){t.post=e.data[0].data.children[0].data,t.currentAuthor=t.post.author,""!==t.post.url&&console.log("URL ",t.parseUrl(t.post.url)),t.post.content=t.post.selftext.replace(/(?:\r\n|\r|\n)/g,"<br>"),t.comments=t.getCommentsFromArray(e.data[1].data.children)})},methods:{getCommentsFromArray:function(t){var e=this,s="";return t.forEach(function(t){if(void 0!==t)if(0===t.data.depth?s+='<div class="pa-1 grey lighten-3 mb-3">':s+='<div class="pa-1 white">',console.log("In Loop",t),s+='\n                  <div class="">\n          ',e.currentAuthor===t.data.author?s+='<b><span class="teal pa-1">'+e.currentAuthor+"</span></b>":s+="<b>"+t.data.author+"</b>",s+="\n                  "+t.data.ups+"</div>\n                  "+e.decodeHTMLEntities(t.data.body_html)+"\n                  </div>",void 0!==t.data.replies&&""!==t.data.replies){e.depth++;var a=10*e.depth;s+='<div style="padding-left: '+a+'px"> '+e.getCommentsFromArray(t.data.replies.data.children)+"</div>"}else e.depth=0}),s},decodeHTMLEntities:function(t){if(t){var e={amp:"&",apos:"'",lt:"<",gt:">",quot:'"',nbsp:"Â "},s=/&([a-z]+);/gi;return t.replace(s,function(t,s){return s=s.toLowerCase(),e.hasOwnProperty(s)?e[s]:t})}return""},parseUrl:function(t){var e=new RegExp("^https?://(.*)/(.*)$","i"),s=t.match(e),a=t.split(".").pop();switch(console.log("Ext",a),this.imageUrl="",a){case"png":case"jpg":case"jpeg":this.isImage=!0,this.imageUrl=t}this.isImage||(this.url=s[1],this.url.match(/imgur/)?(this.getImageFromImgur(t),this.isImage=!0):this.url="")},getImageFromImgur:function(t){var e=this;r.a.get("http://localhost:9000/imgur/image?url="+t).then(function(t){e.imageUrl=t.data.url})}}}},40:function(t,e,s){"use strict";var a=s(95),r=s.n(a),o=s(105),n=(s.n(o),s(106));e.a={name:"",components:{PostRow:n.a},props:[],mounted:function(){this.$route.query.after?this.loadPosts(this.$route.query.after):this.loadPosts(null)},data:function(){return{loading:!0}},watch:{"$store.state.route.params.subReddit":function(){this.$store.state.reddit.currentAfter=null,this.$store.state.reddit.pages=[],this.loadPosts(null)},$route:function(t,e){console.log(t),t.query.after?this.loadPosts(t.query.after):this.loadPosts(null)},"$store.state.reddit.currentType":function(){this.$store.state.reddit.currentAfter=null,this.$store.state.reddit.pages=[],this.loadPosts(null)}},methods:{loadPosts:function(t){var e=this;this.loading=!0,this.$store.state.reddit.currentPosts=[],this.$store.dispatch("loadPosts",t).then(function(t){e.loading=!1,console.log("Scrolling to",e.$store.state.lastScroll),setTimeout(function(){e.$vuetify.goTo(e.$store.state.lastScroll,{duration:300,offset:0,easing:"easeInOutCubic",easings:r()(o)}).then(function(){})})})},loadPost:function(t){console.log("We need to set scroll position",window.scrollY),this.$vuetify.goTo(window.scrollY),this.$router.push("/reiddit/"+this.$route.params.subReddit+"/post/"+t)}}}},48:function(t,e,s){"use strict";e.a={name:"post-row",props:{post:{}},computed:{postUrl:function(){}},methods:{loadPost:function(){console.log("Can we save window position",window.scrollY),this.$store.state.lastScroll=window.scrollY,this.$router.push("/reddit/post/"+this.$store.state.route.params.subReddit+"/"+this.post.data.id)}}}},57:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(11),r=s(60),o=s(62),n=s(109),i=s(143),l=s.n(i),c=s(144),u=(s.n(c),s(12)),d=s.n(u),p=s(145),v=s.n(p),h=s(146);s.n(h);a.default.use(v.a,d.a),Object(h.sync)(n.a,o.a),a.default.use(l.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:o.a,store:n.a,components:{App:r.a},template:"<App/>"})},60:function(t,e,s){"use strict";var a=s(30),r=s(61),o=s(4),n=o(a.a,r.a,!1,null,null,null);e.a=n.exports},61:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-navigation-drawer",{attrs:{persistent:"","mini-variant":t.miniVariant,clipped:t.clipped,"enable-resize-watcher":"",fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("div",{staticClass:"pa-2"}),t._v(" "),s("v-list",t._l(t.$store.state.reddit.subs,function(e,a){return s("v-list-tile",{key:a,attrs:{value:"true",to:e.path},on:{click:function(e){t.drawer=!1}}},[s("v-list-tile-action"),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{textContent:t._s(e.name)}})],1)],1)}))],1),t._v(" "),s("v-toolbar",{attrs:{app:"","clipped-left":t.clipped}},[s("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),s("v-btn",{attrs:{icon:""},on:{click:function(e){t.$router.go(-1)}}},[s("v-icon",[t._v("chevron_left")])],1),t._v(" "),s("v-toolbar-title",[t._v(" "+t._s(t.$store.state.title))]),t._v(" "),s("v-spacer"),t._v(" "),s("v-layout",[s("v-flex",{attrs:{xs8:""}}),t._v(" "),s("v-flex",{staticClass:"text-xs-right pt-3",attrs:{xs4:""}},[s("v-select",{attrs:{items:t.$store.state.reddit.types},model:{value:t.$store.state.reddit.currentType,callback:function(e){t.$set(t.$store.state.reddit,"currentType",e)},expression:"$store.state.reddit.currentType"}})],1)],1)],1),t._v(" "),s("v-content",{attrs:{id:"mainContent"}},[s("router-view")],1),t._v(" "),s("v-footer",{attrs:{fixed:t.fixed,app:"",height:48}},[s("v-layout",{staticClass:"pa-2"},[s("v-flex",{attrs:{xs6:""}},[s("v-btn",{staticClass:"grey",attrs:{small:"",disabled:1===t.$store.state.reddit.pages.length},on:{click:t.loadPrevious}},[t._v("Previous\n                ")])],1),t._v(" "),s("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[s("v-btn",{staticClass:"grey",attrs:{small:""},on:{click:t.loadNext}},[t._v("Next\n                ")])],1)],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},62:function(t,e,s){"use strict";var a=s(11),r=s(63),o=s(64),n=(s(68),s(90)),i=s(93);a.default.use(r.a),e.a=new r.a({history:!0,scrollBehavior:function(t,e,s){return s||{x:0,y:0}},routes:[{path:"/",name:"Start",component:o.a},{path:"/reddit/sub/:subReddit/:section?",name:"Reddit Sub",component:i.a},{path:"/reddit/post/:subReddit/:postId",name:"Reddit Post",component:n.a}]})},64:function(t,e,s){"use strict";function a(t){s(65)}var r=s(31),o=s(67),n=s(4),i=a,l=n(r.a,o.a,!1,i,"data-v-72d97b20",null);e.a=l.exports},65:function(t,e){},67:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:""}},[s("v-layout",[s("v-flex",{attrs:{xs4:"",md6:""}},[t._v("\n            Ando so it begin\n        ")]),t._v(" "),s("v-flex",{attrs:{xs4:"",md6:""}},[t._v("\n            Again....\n        ")])],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},68:function(t,e,s){"use strict";var a=s(32),r=s(89),o=s(4),n=o(a.a,r.a,!1,null,null,null);n.exports},87:function(t,e,s){"use strict";var a=s(38),r=s(88),o=s(4),n=o(a.a,r.a,!1,null,null,null);e.a=n.exports},88:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-list-tile",{attrs:{avatar:""},on:{click:function(e){t.loadPost(t.post)}}},[s("v-list-tile-avatar",[t._v("\n            "+t._s(t.post.data.score)+"\n        ")]),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(t.post.data.title)+" -\n                "),s("small",[t._v(t._s(t.post.data.domain))])]),t._v(" "),s("v-list-tile-sub-title",[t._v(t._s(t.post.data.num_comments)+" Comments")])],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},89:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-layout",{staticClass:"pa-2"},[t.loading?s("div",[t._v("Loading.........")]):t._e(),t._v(" "),t.loading?t._e():s("v-card",{attrs:{flat:""}},[s("v-list",{attrs:{"two-line":""}},t._l(t.posts,function(e,a){return s("post-row",{key:a,attrs:{post:e},on:{loadPost:t.loadPost}})}))],1)],1),t._v(" "),s("v-layout",[s("v-flex",{staticClass:"px-2",attrs:{xs6:""}},[s("v-btn",{attrs:{small:"",color:"grey"},on:{click:t.previous}},[t._v("Prev\n            ")])],1),t._v(" "),s("v-flex",{staticClass:"text-xs-right px-2",attrs:{xs6:""}},[s("v-btn",{attrs:{small:"",color:"grey"},on:{click:t.next}},[t._v("Next\n            ")])],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},90:function(t,e,s){"use strict";function a(t){s(91)}var r=s(39),o=s(92),n=s(4),i=a,l=n(r.a,o.a,!1,i,"data-v-b9c03c80",null);e.a=l.exports},91:function(t,e){},92:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("div",{staticClass:"postTitle mb-2"},[s("strong",[t._v(t._s(t.post.title))]),t._v("\n        - "),s("span",{staticClass:"teal pa-1"},[t._v(t._s(t.post.author))])]),t._v(" "),t.isImage?s("img",{attrs:{src:t.imageUrl,width:"500"}}):t._e(),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"pa-2 mb-2"},[t._v("\n        "+t._s(t.post.url)+"\n        "),s("a",{attrs:{href:t.post.url,target:"_blank"}},[s("v-icon",{attrs:{small:""}},[t._v("link")])],1)]),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.comments)}})])},r=[],o={render:a,staticRenderFns:r};e.a=o},93:function(t,e,s){"use strict";function a(t){s(94)}var r=s(40),o=s(108),n=s(4),i=a,l=n(r.a,o.a,!1,i,"data-v-8f918b5e",null);e.a=l.exports},94:function(t,e){}},[57]);
//# sourceMappingURL=app.d2bf22a5ae49176fab34.js.map